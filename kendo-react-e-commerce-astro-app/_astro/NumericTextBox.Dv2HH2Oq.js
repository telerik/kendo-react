import{r as s}from"./index.Br4GBDYe.js";import{I as ht,Q as ke,al as Ke,T as St,n as yt,z as Te,g as Ye,ak as xt,aj as Et,e as o}from"./languageStore.DxFC5qNV.js";import{i as Ot}from"./useInternationalization.DKztKSD1.js";import{i as kt}from"./index.CPqzBmqf.js";import{n as Ct,a as Nt,e as It}from"./withPropsContext.asPZibEZ.js";import{s as Ge}from"./useCustomComponent.DD3pRfQM.js";import{I as $t}from"./FloatingLabel.CV39gnJa.js";import{o as fe,I as ge,e as pe}from"./index.zQUBlHq1.js";/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright © 2025 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */const Ve=11111111111111e-7,Rt=.31111111111111117,wt=1,et=1,tt=0,N=/\d/,rt=15,He=()=>({eventValue:null,prevLooseValue:"",currentLooseValue:"",focused:!1,selectionStart:void 0,selectionEnd:void 0,decimalSelect:!1,valueIsCorrected:!1,valueIsOutOfRange:!1}),Ce=(t,r)=>t!==void 0?t:r,y=(t,r,n)=>t===null&&t===void 0?"":typeof t=="string"?t:n.formatNumber(t,r),Ue=t=>(String(t).split(".")[1]||"").length,nt=(t,r)=>Math.max(Ue(t),Ue(r)),Mt=t=>Math.min(t,rt),lt=(t,r)=>{const n=Mt(r);return parseFloat(t.toFixed(n))},We=(t,r,n,e,m,a,c)=>{const u=nt(t||0,n||0),f=Y(lt((t||0)+(n||0),u),e,m);r.eventValue=f,r.currentLooseValue=y(f,a,c),r.selectionStart=r.selectionEnd=X(r.currentLooseValue,N)},Je=(t,r,n,e,m,a,c)=>{const u=nt(t||0,n||0),f=Y(lt((t||0)-(n||0),u),e,m);r.eventValue=f,r.currentLooseValue=y(f,a,c),r.selectionStart=r.selectionEnd=X(r.currentLooseValue,N)},Y=(t,r,n)=>t==null?t:!(t>1||t<1||t===1)||n!==void 0&&r!==void 0&&n<r?null:(n!==void 0&&t>n&&(t=n),r!==void 0&&t<r&&(t=r),t),Ft=(t,r)=>{const n=r.findIndex(([m,a])=>!!a&&t.indexOf(a)===t.length-a.length);if(n===-1)return-1;const e=r[n][1];return t.length-e.length},jt=(t,r)=>{const n=r.findIndex(([e,m])=>!!e&&t.indexOf(e)===0);return n===-1?-1:r[n][0].length},Dt=(t,r,n)=>{const e=Ft(t,r);if(e!==-1&&n.selectionStart>e){n.selectionStart=n.selectionEnd=e;return}n.selectionStart>t.length&&(n.selectionStart=n.selectionEnd=t.length);const m=jt(t,r);m!==-1&&n.selectionStart<m&&(n.selectionStart=n.selectionEnd=m),n.selectionStart===-1&&(n.selectionStart=n.selectionEnd=0)},$=(t,r,n,e)=>{t.selectionStart=t.selectionEnd=r,Dt(n,e,t)},Qe=(t,r,n,e)=>{t.eventValue=e.parseNumber(t.prevLooseValue,r),t.currentLooseValue=t.prevLooseValue,t.valueIsCorrected=!0,$(t,t.selectionStart,t.currentLooseValue,n)},Ne=(t,r,n)=>r.split(t).length!==n.split(t).length&&r.length===n.length+t.length,Pt=(t,r)=>{const n=String(t.currentLooseValue),e=String(t.prevLooseValue);return Ne(r.minusSign,n,e)||Ne("-",n,e)||Ne("−",n,e)},Bt=(t,r)=>{const n=String(t.currentLooseValue),e=String(t.prevLooseValue);return n.indexOf(r.minusSign)===-1&&e.indexOf(r.minusSign)!==-1},zt=(t,r)=>String(t.currentLooseValue).split(r.decimal).length>2,qt=(t,r)=>{const n=r.formatNumber(Ve,t),e=r.formatNumber(-Ve,t),m=r.formatNumber(tt,t),a=r.formatNumber(et,t),c=be(n),u=be(e),f=be(m),h=be(a),D=ve(n),A=ve(e),b=ve(m),v=ve(a);return{positiveInfo:[c,D],negativeInfo:[u,A],zeroInfo:[f,b],oneInfo:[h,v]}},At=(t,r)=>{const n=r.formatNumber(Ve,t),e=r.formatNumber(-Ve,t),m=r.formatNumber(tt,t),a=r.formatNumber(et,t),c=r.numberSymbols(),u=new RegExp(`[\\d\\${c.decimal}${c.group}]`,"g");return[n,e,m,a].map(f=>f.replace(u,"")).join("").split("").filter((f,h,D)=>D.indexOf(f)===h).join("")},Ie=(t,r)=>{const n=t.indexOf(r.decimal);return n>-1?n:X(t,N)},Re=t=>t.split("").reverse().join(""),X=(t,r)=>t.length-Re(t).search(r),be=t=>t.split(t[t.search(N)])[0],ve=t=>{const r=Re(t);return Re(r.split(r[r.search(N)])[0])},$e=(t,r)=>t.search(r),_e=(t,r)=>{const n=t.indexOf(r);return n>-1?t.length-n-1:0},Ze=(t,r,n,e,m)=>{const a=t.replace(m,"")[0]==="0",c=r.replace(m,"")[0]==="0";if(a&&!c)return n-1;if(c&&e)return n+1;let u=0;for(let h=0;h<n;h++)N.test(t.charAt(h))&&u++;let f=0;for(;u>0&&r.length>f;)N.test(r.charAt(f))&&u--,f++;return f},Xe=(t,r,n)=>{const e={...t},{prevLooseValue:m}=e,a=n.numberSymbols(),c=At(r,n),u=String(e.currentLooseValue),f=String(m),h=new RegExp(`[^\\d\\${a.decimal}]`,"g"),D=new RegExp(`[^\\d\\${a.decimal}\\${a.group}]`,"g"),A=new RegExp(`[\\d\\${a.decimal}\\${a.group}]`),b=u.replace(h,""),v=$e(u,N),R=v===-1?-1:X(u,N),G=u.indexOf(a.decimal),P=(u.substring(0,v)+u.substring(v,R).replace(D,"")+u.substring(R,u.length)).split("").filter(p=>c.indexOf(p)!==-1||p.search(A)!==-1).join(""),ee=n.formatNumber(Rt,r).replace(h,""),te=ee.indexOf(a.decimal),w=te>-1?ee.length-te-1:0,re=n.formatNumber(wt,r).replace(h,""),ne=re.indexOf(a.decimal),O=ne>-1?re.length-ne-1:0,{positiveInfo:H,negativeInfo:Le,zeroInfo:we,oneInfo:Me}=qt(r,n),E=[H,Le,we,Me],le=E.findIndex(p=>p.findIndex(B=>!!B)!==-1)!==1,U=u.length>0&&u.length<f.length,K=typeof r=="string"&&r[0]==="p"&&u&&u.indexOf(a.percentSign)===-1;if(!e.isPaste){if(u==="")return e.eventValue=null,e.currentLooseValue="",e;if(e.currentLooseValue===a.minusSign&&n.formatNumber(-0,r)!==f)return e.eventValue=-0,e.currentLooseValue=y(e.eventValue,r,n),$(e,Ie(e.currentLooseValue,a),e.currentLooseValue,E),e;if(e.currentLooseValue===a.decimal){e.eventValue=0;const i=y(e.eventValue,r,n);if(O===0&&w>0){const g=X(i,N);e.currentLooseValue=i.substring(0,g)+a.decimal+i.substring(g)}else e.currentLooseValue=i;return $(e,Ie(e.currentLooseValue,a)+1,e.currentLooseValue,E),e}if(Pt(e,a)){const i=n.parseNumber(m,r);e.eventValue=-(i!==null?i:0),e.currentLooseValue=y(e.eventValue,r,n);const g=$e(e.currentLooseValue,N),k=$e(f,N);return $(e,e.selectionEnd-1+(g-k),e.currentLooseValue,E),e}if(Bt(e,a))return e.eventValue=n.parseNumber(e.currentLooseValue,r),$(e,e.selectionStart,e.currentLooseValue,E),e;if(zt(e,a))return Qe(e,r,E,n),e;if(K)return e.eventValue=n.parseNumber(u,r)/100,e.currentLooseValue=y(e.eventValue,r,n),e;if(String(e.currentLooseValue).replace(/[^\d]/g,"").length>rt||b!==u&&u&&le&&E.findIndex(([i,g])=>{const k=u.indexOf(i),W=u.indexOf(g),ue=k===0,I=W===u.length-g.length,J=k+i.length!==v&&v!==-1&&u[k+i.length]!==a.decimal,Q=W!==R&&R!==-1&&u[W-1]!==a.decimal;return i&&g?J||Q?!1:ue&&I:i?J?!1:ue:g?Q?!1:I:!1})===-1)return Qe(e,r,E,n),e;if(b[b.length-1]===a.decimal&&w>0)return e.eventValue=n.parseNumber(u,r),e.currentLooseValue=P,e;if(e.currentLooseValue&&m&&(c+a.decimal+a.group).split("").findIndex(i=>u.split("").filter(g=>g===i).length<f.split("").filter(g=>g===i).length&&u.length+1===f.length?!(i===a.decimal&&_e(f.replace(h,""),a.decimal)===0):!1)>-1)return e.eventValue=n.parseNumber(t.prevLooseValue,r),e.currentLooseValue=t.prevLooseValue,e;const p=_e(b,a.decimal),B=b[b.length-1]==="0";if(U&&B&&p<O)return e.eventValue=n.parseNumber(e.currentLooseValue,r),e.currentLooseValue=y(e.eventValue,r,n),e;if(p>0){const i=u.substring(0,G);if(B&&(!i||f.indexOf(i)!==0)){e.eventValue=n.parseNumber(e.currentLooseValue,r);const g=y(e.eventValue,r,n);return $(e,Ze(u,g,e.selectionEnd,U,h),g,E),e.currentLooseValue=g,e}if(p>w){const g=u.indexOf(a.decimal),k=u.substring(0,g)+u.substring(g,g+1+w)+u.substring(R,String(e.currentLooseValue).length);return e.eventValue=n.parseNumber(k,r),e.currentLooseValue=k,$(e,e.selectionStart,k,E),e}if(O!==w&&p<=w&&B)return e.eventValue=n.parseNumber(e.currentLooseValue,r),e.currentLooseValue=P,e;if(p<O)return e.eventValue=n.parseNumber(e.currentLooseValue,r),e.currentLooseValue=y(e.eventValue,r,n),e}}if(e.eventValue=n.parseNumber(e.currentLooseValue,r),K&&(e.eventValue=e.eventValue/100),typeof e.eventValue=="number"){const p=y(e.eventValue,r,n);u.length===1?$(e,Ie(p,a),p,E):$(e,Ze(u,p,e.selectionEnd,U,h),p,E),e.currentLooseValue=p}else e.currentLooseValue=y(n.parseNumber(b),r,n);return e};/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright © 2025 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */const Kt="Please enter a valid value!",Tt=Nt(),ut=s.forwardRef((t,r)=>{const n=Ct(Tt,t),{className:e,value:m,defaultValue:a,format:c,width:u,tabIndex:f,accessKey:h,title:D,placeholder:A,min:b,max:v,dir:R,name:G,label:P,id:ee,ariaDescribedBy:te,ariaLabelledBy:w,ariaLabel:re,inputType:ne,readOnly:O,validationMessage:H,children:Le,touched:we,visited:Me,modified:E,style:le,inputStyle:U,valid:K,step:p=S.step,spinners:B=S.spinners,disabled:i=S.disabled,required:g=S.required,validityStyles:k=S.validityStyles,prefix:W=S.prefix,suffix:ue=S.suffix,onChange:I=S.onChange,onFocus:J=S.onFocus,onBlur:Q=S.onBlur,rangeOnEnter:Fe=S.rangeOnEnter,size:he=S.size,rounded:Se=S.rounded,fillMode:ae=S.fillMode,autoFocus:at=S.autoFocus,inputAttributes:ot,...je}=n,st=ht(),De=ee||st,L=Ot(),oe=kt(),V=s.useRef(null),se=s.useRef(),[it,T]=s.useState(!1),x=s.useRef(He()),ie=s.useRef(!1),ye=s.useRef(),_=s.useRef(a),Z=y(x.current.focused&&!i?x.current.currentLooseValue:Ce(m,_.current),c,L);ye.current=Z;const[ct]=Ge(W),[dt]=Ge(ue);s.useEffect(()=>{V.current&&V.current.setCustomValidity&&V.current.setCustomValidity(me().valid?"":H||Kt)});const Pe=s.useCallback(()=>{V.current&&V.current.focus()},[]),ce=s.useCallback(()=>se.current!==void 0?se.current:Ce(m,_.current),[m]),Be=s.useCallback(()=>G,[G]),de=s.useCallback(()=>g,[g]),me=s.useCallback(()=>{const d=H!==void 0,l=ce(),q=K!==void 0?K:!x.current.valueIsOutOfRange&&(!de()||l!=null);return{customError:d,valid:q,valueMissing:l==null}},[H,K,ce,de]),xe=s.useCallback(()=>k,[k]),ze=s.useCallback(()=>n,[n]),z=s.useCallback(()=>{const d={element:V.current,focus:Pe};return Object.defineProperty(d,"name",{get:Be}),Object.defineProperty(d,"value",{get:ce}),Object.defineProperty(d,"validity",{get:me}),Object.defineProperty(d,"validityStyles",{get:xe}),Object.defineProperty(d,"required",{get:de}),Object.defineProperty(d,"props",{get:ze}),d},[Be,ce,me,xe,de,Pe,ze]);s.useImperativeHandle(r,z);const M=s.useCallback(()=>({eventValue:Ce(m,_.current),prevLooseValue:ye.current,currentLooseValue:V.current.value,selectionStart:V.current.selectionStart,selectionEnd:V.current.selectionEnd,decimalSelect:!1,valueIsCorrected:!1,valueIsOutOfRange:!1,isPaste:ie.current,focused:x.current.focused}),[m]),F=s.useCallback((d,l)=>{if(i)return;se.current=l.eventValue,_.current=l.eventValue;const q=y(Y(l.eventValue,b,v),c,L),C=Y(L.parseNumber(q,c),b,v);C!==l.eventValue&&(l.valueIsOutOfRange=!0,l.eventValue=C,_.current=C),m!==l.eventValue&&ke(I,d,z(),{value:l.eventValue}),se.current=void 0,x.current=l,T(j=>!j)},[m,I,i,T,z]),mt=s.useCallback(d=>{const l=M();ie.current=!1,F(d,Xe(l,c,L))},[c,I,L,F,M]),ft=s.useCallback(d=>{let l=M();const q=L.parseNumber(String(l.currentLooseValue),c);if(l.selectionEnd>l.selectionStart&&l.selectionEnd-l.selectionStart===String(l.currentLooseValue).length){const C=L.numberSymbols(),j=C&&d.key===C.minusSign,Lt=C&&d.key===C.decimal;ie.current=!j&&!Lt;return}switch(d.keyCode){case 38:We(q,l,p,b,v,c,L);break;case 40:Je(q,l,p,b,v,c,L);break;case 13:{if(Fe===!1)return;const C=y(Y(q,b,v),c,L),j=Y(L.parseNumber(C,c),b,v);l.eventValue=j,l.currentLooseValue=y(j,c,L),l.selectionStart=l.selectionEnd=l.currentLooseValue.length;break}case 110:{const C=V.current,j=L.numberSymbols();C&&(l.currentLooseValue=l.currentLooseValue.slice(0,l.selectionStart)+j.decimal+l.currentLooseValue.slice(l.selectionEnd),l.selectionStart=l.selectionEnd=l.selectionStart+1,l=Xe(l,c,L));break}default:return}d.preventDefault(),F(d,l)},[c,b,v,p,I,Fe,F,M]),gt=s.useCallback(()=>{ie.current=!0},[]),Ee=s.useCallback(d=>{if(O||i)return;const l=M();We(L.parseNumber(String(l.currentLooseValue),c),l,p,b,v,c,L),F(d,l)},[c,b,v,p,I,O,i,F,M]),Oe=s.useCallback(d=>{if(O||i)return;const l=M();Je(L.parseNumber(String(l.currentLooseValue),c),l,p,b,v,c,L),F(d,l)},[c,b,v,p,I,O,i,F,M]),pt=s.useCallback(d=>{const l=Ke(document);!document||l!==V.current||!V.current||O||i||(d.nativeEvent.deltaY<0&&Ee(d),d.nativeEvent.deltaY>0&&Oe(d))},[Ee,Oe,i,O]),bt=s.useCallback(d=>{x.current.currentLooseValue=ye.current,x.current.focused=!0,ke(J,d,z(),{}),T(l=>!l)},[J,T,z]),vt=s.useCallback(d=>{x.current=He(),ke(Q,d,z(),{}),T(l=>!l)},[Q,T,z]),Vt=s.useCallback(d=>{if(document&&V.current){const l=Ke(document);d.preventDefault(),l!==V.current&&V.current.focus()}},[]);St(()=>{V.current&&V.current.type!=="number"&&x.current.selectionStart!==void 0&&x.current.selectionEnd!==void 0&&(V.current.selectionStart=x.current.selectionStart,V.current.selectionEnd=x.current.selectionEnd,x.current.selectionStart=void 0,x.current.selectionEnd=void 0)},[it]);const qe=!xe()||me().valid,Ae=s.createElement("span",{dir:R,style:P?le:{width:u,...le},className:yt("k-input","k-numerictextbox",{[`k-input-${Te.sizeMap[he]||he}`]:he,[`k-input-${ae}`]:ae,[`k-rounded-${Te.roundedMap[Se]||Se}`]:Se,"k-invalid":!qe,"k-required":g,"k-disabled":i},e),"aria-disabled":i?"true":void 0,...P?{}:je},s.createElement(ct,null),s.createElement("input",{role:"spinbutton",value:Z===null?"":Z,tabIndex:It(f,i),accessKey:h,disabled:i,title:D,"aria-disabled":i?"true":void 0,"aria-valuemin":b,"aria-valuemax":v,"aria-label":re,"aria-labelledby":w,"aria-describedby":te,"aria-required":g,placeholder:A,spellCheck:!1,autoComplete:"off",autoCorrect:"off",autoFocus:at,type:ne||"tel",className:"k-input-inner",id:De,name:G,readOnly:O,style:U,onChange:mt,onFocus:bt,onBlur:vt,onKeyDown:ft,onPaste:gt,onWheel:pt,ref:V,...ot}),s.createElement(dt,null),Le,B&&s.createElement("span",{className:"k-input-spinner k-spin-button",onMouseDown:Vt},s.createElement(Ye,{tabIndex:-1,type:"button",icon:"caret-alt-up",svgIcon:xt,rounded:null,fillMode:ae,className:"k-spinner-increase","aria-label":oe.toLanguageString(fe,ge[fe]),title:oe.toLanguageString(fe,ge[fe]),onClick:Ee}),s.createElement(Ye,{tabIndex:-1,type:"button",icon:"caret-alt-down",svgIcon:Et,rounded:null,fillMode:ae,className:"k-spinner-decrease","aria-label":oe.toLanguageString(pe,ge[pe]),title:oe.toLanguageString(pe,ge[pe]),onClick:Oe})));return P?s.createElement($t,{label:P,editorId:De,editorValue:Z===null?"":Z,editorValid:qe,editorDisabled:i,editorPlaceholder:A,children:Ae,style:{width:u},dir:R,...je}):Ae});ut.propTypes={value:o.number,defaultValue:o.number,step:o.number,format:o.oneOfType([o.string,o.shape({style:o.oneOf(["decimal","currency","percent","scientific","accounting"]),currency:o.string,currencyDisplay:o.oneOf(["symbol","code","name"]),useGrouping:o.bool,minimumIntegerDigits:o.number,minimumFractionDigits:o.number,maximumFractionDigits:o.number})]),width:o.oneOfType([o.string,o.number]),tabIndex:o.number,accessKey:o.string,title:o.string,placeholder:o.string,min:o.number,max:o.number,spinners:o.bool,disabled:o.bool,readOnly:o.bool,dir:o.string,name:o.string,label:o.string,validationMessage:o.string,required:o.bool,id:o.string,rangeOnEnter:o.bool,ariaLabelledBy:o.string,ariaDescribedBy:o.string,ariaLabel:o.string,onChange:o.func,onFocus:o.func,onBlur:o.func,size:o.oneOf([null,"small","medium","large"]),rounded:o.oneOf([null,"small","medium","large","full"]),fillMode:o.oneOf([null,"solid","flat","outline"]),inputAttributes:o.object};const S={prefix:t=>null,suffix:t=>null,step:1,spinners:!0,disabled:!1,required:!1,validityStyles:!0,rangeOnEnter:!0,autoFocus:!1,onChange:t=>{},onFocus:t=>{},onBlur:t=>{},size:"medium",rounded:"medium",fillMode:"solid"};ut.displayName="KendoNumericTextBox";export{ut as E};
