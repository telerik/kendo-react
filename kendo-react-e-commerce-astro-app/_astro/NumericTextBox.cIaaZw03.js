import{r as s}from"./index.B76fyJ3R.js";import{l as bt,m as Vt,H as ke,P as qe,g as vt,r as Lt,G as ze,B as Ke,F as ht,E as St,s as o}from"./index.fyhapWxR.js";import{r as yt,e as xt,s as Ae}from"./package-metadata.TVBBE_0N.js";import{a as Et}from"./package-metadata.DJUVDG_u.js";import{n as Ot,a as kt,o as Ct}from"./withPropsContext.DQhlWJ5O.js";import{R as Nt}from"./FloatingLabel.wNoNYSXa.js";import{e as ge,I as pe,o as be}from"./index.D0pMWoZI.js";/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright © 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */const It=()=>s.useContext(yt).intl;/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright © 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */const Le=11111111111111e-7,$t=.31111111111111117,Rt=1,Ze=1,Qe=0,I=/\d/,Xe=15,Te=()=>({eventValue:null,prevLooseValue:"",currentLooseValue:"",focused:!1,selectionStart:void 0,selectionEnd:void 0,decimalSelect:!1,valueIsCorrected:!1,valueIsOutOfRange:!1}),Ce=(t,r)=>t!==void 0?t:r,O=(t,r,n)=>t===null&&t===void 0?"":typeof t=="string"?t:n.formatNumber(t,r),He=t=>(String(t).split(".")[1]||"").length,et=(t,r)=>Math.max(He(t),He(r)),wt=t=>Math.min(t,Xe),tt=(t,r)=>{const n=wt(r);return parseFloat(t.toFixed(n))},Ye=(t,r,n,e,d,a,i)=>{const u=et(t||0,n||0),m=U(tt((t||0)+(n||0),u),e,d);r.eventValue=m,r.currentLooseValue=O(m,a,i),r.selectionStart=r.selectionEnd=te(r.currentLooseValue,I)},Ge=(t,r,n,e,d,a,i)=>{const u=et(t||0,n||0),m=U(tt((t||0)-(n||0),u),e,d);r.eventValue=m,r.currentLooseValue=O(m,a,i),r.selectionStart=r.selectionEnd=te(r.currentLooseValue,I)},U=(t,r,n)=>t==null?t:!(t>1||t<1||t===1)||n!==void 0&&r!==void 0&&n<r?null:(n!==void 0&&t>n&&(t=n),r!==void 0&&t<r&&(t=r),t),Ft=(t,r)=>{const n=r.findIndex(([d,a])=>!!a&&t.indexOf(a)===t.length-a.length);if(n===-1)return-1;const e=r[n][1];return t.length-e.length},Mt=(t,r)=>{const n=r.findIndex(([e,d])=>!!e&&t.indexOf(e)===0);return n===-1?-1:r[n][0].length},Bt=(t,r,n)=>{const e=Ft(t,r);if(e!==-1&&n.selectionStart>e){n.selectionStart=n.selectionEnd=e;return}n.selectionStart>t.length&&(n.selectionStart=n.selectionEnd=t.length);const d=Mt(t,r);d!==-1&&n.selectionStart<d&&(n.selectionStart=n.selectionEnd=d),n.selectionStart===-1&&(n.selectionStart=n.selectionEnd=0)},R=(t,r,n,e)=>{t.selectionStart=t.selectionEnd=r,Bt(n,e,t)},Ue=(t,r,n,e)=>{t.eventValue=e.parseNumber(t.prevLooseValue,r),t.currentLooseValue=t.prevLooseValue,t.valueIsCorrected=!0,R(t,t.selectionStart,t.currentLooseValue,n)},Ne=(t,r,n)=>r.split(t).length!==n.split(t).length&&r.length===n.length+t.length,Dt=(t,r)=>{const n=String(t.currentLooseValue),e=String(t.prevLooseValue);return Ne(r.minusSign,n,e)||Ne("-",n,e)||Ne("−",n,e)},Pt=(t,r)=>{const n=String(t.currentLooseValue),e=String(t.prevLooseValue);return n.indexOf(r.minusSign)===-1&&e.indexOf(r.minusSign)!==-1},jt=(t,r)=>String(t.currentLooseValue).split(r.decimal).length>2,qt=(t,r)=>{const n=r.formatNumber(Le,t),e=r.formatNumber(-Le,t),d=r.formatNumber(Qe,t),a=r.formatNumber(Ze,t),i=Ve(n),u=Ve(e),m=Ve(d),S=Ve(a),j=ve(n),A=ve(e),g=ve(d),V=ve(a);return{positiveInfo:[i,j],negativeInfo:[u,A],zeroInfo:[m,g],oneInfo:[S,V]}},zt=(t,r)=>{const n=r.formatNumber(Le,t),e=r.formatNumber(-Le,t),d=r.formatNumber(Qe,t),a=r.formatNumber(Ze,t),i=r.numberSymbols(),u=new RegExp(`[\\d\\${i.decimal}${i.group}]`,"g");return[n,e,d,a].map(m=>m.replace(u,"")).join("").split("").filter((m,S,j)=>j.indexOf(m)===S).join("")},Ie=(t,r)=>{const n=t.indexOf(r.decimal);return n>-1?n:te(t,I)},Re=t=>t.split("").reverse().join(""),te=(t,r)=>t.length-Re(t).search(r),Ve=t=>t.split(t[t.search(I)])[0],ve=t=>{const r=Re(t);return Re(r.split(r[r.search(I)])[0])},$e=(t,r)=>t.search(r),We=(t,r)=>{const n=t.indexOf(r);return n>-1?t.length-n-1:0},Je=(t,r,n,e,d)=>{const a=t.replace(d,"")[0]==="0",i=r.replace(d,"")[0]==="0";if(a&&!i)return n-1;if(i&&e)return n+1;let u=0;for(let S=0;S<n;S++)I.test(t.charAt(S))&&u++;let m=0;for(;u>0&&r.length>m;)I.test(r.charAt(m))&&u--,m++;return m},_e=(t,r,n)=>{const e={...t},{prevLooseValue:d}=e,a=n.numberSymbols(),i=zt(r,n),u=String(e.currentLooseValue),m=String(d),S=new RegExp(`[^\\d\\${a.decimal}]`,"g"),j=new RegExp(`[^\\d\\${a.decimal}\\${a.group}]`,"g"),A=new RegExp(`[\\d\\${a.decimal}\\${a.group}]`),g=u.replace(S,""),V=$e(u,I),w=V===-1?-1:te(u,I),W=u.indexOf(a.decimal),q=(u.substring(0,V)+u.substring(V,w).replace(j,"")+u.substring(w,u.length)).split("").filter(b=>i.indexOf(b)!==-1||b.search(A)!==-1).join(""),re=n.formatNumber($t,r).replace(S,""),ne=re.indexOf(a.decimal),F=ne>-1?re.length-ne-1:0,le=n.formatNumber(Rt,r).replace(S,""),ue=le.indexOf(a.decimal),C=ue>-1?le.length-ue-1:0,{positiveInfo:J,negativeInfo:he,zeroInfo:ae,oneInfo:Se}=qt(r,n),y=[J,he,ae,Se],$=y.findIndex(b=>b.findIndex(M=>!!M)!==-1)!==1,_=u.length>0&&u.length<m.length,L=typeof r=="string"&&r[0]==="p"&&u&&u.indexOf(a.percentSign)===-1;if(!e.isPaste){if(u==="")return e.eventValue=null,e.currentLooseValue="",e;if(e.currentLooseValue===a.minusSign&&n.formatNumber(-0,r)!==m)return e.eventValue=-0,e.currentLooseValue=O(e.eventValue,r,n),R(e,Ie(e.currentLooseValue,a),e.currentLooseValue,y),e;if(e.currentLooseValue===a.decimal){e.eventValue=0;const p=O(e.eventValue,r,n);if(C===0&&F>0){const f=te(p,I);e.currentLooseValue=p.substring(0,f)+a.decimal+p.substring(f)}else e.currentLooseValue=p;return R(e,Ie(e.currentLooseValue,a)+1,e.currentLooseValue,y),e}if(Dt(e,a)){const p=n.parseNumber(d,r);e.eventValue=-(p!==null?p:0),e.currentLooseValue=O(e.eventValue,r,n);const f=$e(e.currentLooseValue,I),x=$e(m,I);return R(e,e.selectionEnd-1+(f-x),e.currentLooseValue,y),e}if(Pt(e,a))return e.eventValue=n.parseNumber(e.currentLooseValue,r),R(e,e.selectionStart,e.currentLooseValue,y),e;if(jt(e,a))return Ue(e,r,y,n),e;if(L)return e.eventValue=n.parseNumber(u,r)/100,e.currentLooseValue=O(e.eventValue,r,n),e;if(String(e.currentLooseValue).replace(/[^\d]/g,"").length>Xe||g!==u&&u&&$&&y.findIndex(([p,f])=>{const x=u.indexOf(p),T=u.indexOf(f),Z=x===0,Q=T===u.length-f.length,H=x+p.length!==V&&V!==-1&&u[x+p.length]!==a.decimal,Y=T!==w&&w!==-1&&u[T-1]!==a.decimal;return p&&f?H||Y?!1:Z&&Q:p?H?!1:Z:f?Y?!1:Q:!1})===-1)return Ue(e,r,y,n),e;if(g[g.length-1]===a.decimal&&F>0)return e.eventValue=n.parseNumber(u,r),e.currentLooseValue=q,e;if(e.currentLooseValue&&d&&(i+a.decimal+a.group).split("").findIndex(p=>u.split("").filter(f=>f===p).length<m.split("").filter(f=>f===p).length&&u.length+1===m.length?!(p===a.decimal&&We(m.replace(S,""),a.decimal)===0):!1)>-1)return e.eventValue=n.parseNumber(t.prevLooseValue,r),e.currentLooseValue=t.prevLooseValue,e;const b=We(g,a.decimal),M=g[g.length-1]==="0";if(_&&M&&b<C)return e.eventValue=n.parseNumber(e.currentLooseValue,r),e.currentLooseValue=O(e.eventValue,r,n),e;if(b>0){const p=u.substring(0,W);if(M&&(!p||m.indexOf(p)!==0)){e.eventValue=n.parseNumber(e.currentLooseValue,r);const f=O(e.eventValue,r,n);return R(e,Je(u,f,e.selectionEnd,_,S),f,y),e.currentLooseValue=f,e}if(b>F){const f=u.indexOf(a.decimal),x=u.substring(0,f)+u.substring(f,f+1+F)+u.substring(w,String(e.currentLooseValue).length);return e.eventValue=n.parseNumber(x,r),e.currentLooseValue=x,R(e,e.selectionStart,x,y),e}if(C!==F&&b<=F&&M)return e.eventValue=n.parseNumber(e.currentLooseValue,r),e.currentLooseValue=q,e;if(b<C)return e.eventValue=n.parseNumber(e.currentLooseValue,r),e.currentLooseValue=O(e.eventValue,r,n),e}}if(e.eventValue=n.parseNumber(e.currentLooseValue,r),L&&(e.eventValue=e.eventValue/100),typeof e.eventValue=="number"){const b=O(e.eventValue,r,n);u.length===1?R(e,Ie(b,a),b,y):R(e,Je(u,b,e.selectionEnd,_,S),b,y),e.currentLooseValue=b}else e.currentLooseValue=O(n.parseNumber(g),r,n);return e};/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright © 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */const Kt="Please enter a valid value!",At=kt(),rt=s.forwardRef((t,r)=>{bt(xt);const n=Ot(At,t),{className:e,value:d,defaultValue:a,format:i,width:u,tabIndex:m,accessKey:S,title:j,placeholder:A,min:g,max:V,dir:w,name:W,label:q,id:re,ariaDescribedBy:ne,ariaLabelledBy:F,ariaLabel:le,inputType:ue,readOnly:C,validationMessage:J,children:he,style:ae,inputStyle:Se,valid:y,step:$=E.step,spinners:_=E.spinners,disabled:L=E.disabled,required:b=E.required,validityStyles:M=E.validityStyles,prefix:p=E.prefix,suffix:f=E.suffix,onChange:x=E.onChange,onFocus:T=E.onFocus,onBlur:Z=E.onBlur,rangeOnEnter:Q=E.rangeOnEnter,size:H=E.size,rounded:Y=E.rounded,fillMode:oe=E.fillMode,autoFocus:nt=E.autoFocus,...we}=n,lt=Vt(),Fe=re||lt,h=It(),se=Et(),v=s.useRef(null),ie=s.useRef(),[ut,G]=s.useState(!1),k=s.useRef(Te()),ce=s.useRef(!1),ye=s.useRef(),X=s.useRef(a),ee=O(k.current.focused&&!L?k.current.currentLooseValue:Ce(d,X.current),i,h);ye.current=ee;const[at]=Ae(p),[ot]=Ae(f);s.useEffect(()=>{v.current&&v.current.setCustomValidity&&v.current.setCustomValidity(fe().valid?"":J||Kt)});const Me=s.useCallback(()=>{v.current&&v.current.focus()},[]),de=s.useCallback(()=>ie.current!==void 0?ie.current:Ce(d,X.current),[d]),Be=s.useCallback(()=>W,[W]),me=s.useCallback(()=>b,[b]),fe=s.useCallback(()=>{const c=J!==void 0,l=de(),K=y!==void 0?y:!k.current.valueIsOutOfRange&&(!me()||l!=null);return{customError:c,valid:K,valueMissing:l==null}},[J,y,de,me]),xe=s.useCallback(()=>M,[M]),De=s.useCallback(()=>n,[n]),z=s.useCallback(()=>{const c={element:v.current,focus:Me};return Object.defineProperty(c,"name",{get:Be}),Object.defineProperty(c,"value",{get:de}),Object.defineProperty(c,"validity",{get:fe}),Object.defineProperty(c,"validityStyles",{get:xe}),Object.defineProperty(c,"required",{get:me}),Object.defineProperty(c,"props",{get:De}),c},[Be,de,fe,xe,me,Me,De]);s.useImperativeHandle(r,z);const B=s.useCallback(()=>({eventValue:Ce(d,X.current),prevLooseValue:ye.current,currentLooseValue:v.current.value,selectionStart:v.current.selectionStart,selectionEnd:v.current.selectionEnd,decimalSelect:!1,valueIsCorrected:!1,valueIsOutOfRange:!1,isPaste:ce.current,focused:k.current.focused}),[d]),D=s.useCallback((c,l)=>{if(L)return;ie.current=l.eventValue,X.current=l.eventValue;const K=O(U(l.eventValue,g,V),i,h),N=U(h.parseNumber(K,i),g,V);N!==l.eventValue&&(l.valueIsOutOfRange=!0,l.eventValue=N,X.current=N),d!==l.eventValue&&ke(x,c,z(),{value:l.eventValue}),ie.current=void 0,k.current=l,G(P=>!P)},[d,x,L,G,z]),st=s.useCallback(c=>{const l=B();ce.current=!1,D(c,_e(l,i,h))},[i,x,h,D,B]),it=s.useCallback(c=>{let l=B();const K=h.parseNumber(String(l.currentLooseValue),i);if(l.selectionEnd>l.selectionStart&&l.selectionEnd-l.selectionStart===String(l.currentLooseValue).length){const N=h.numberSymbols(),P=N&&c.key===N.minusSign,pt=N&&c.key===N.decimal;ce.current=!P&&!pt;return}switch(c.keyCode){case 38:Ye(K,l,$,g,V,i,h);break;case 40:Ge(K,l,$,g,V,i,h);break;case 13:{if(Q===!1)return;const N=O(U(K,g,V),i,h),P=U(h.parseNumber(N,i),g,V);l.eventValue=P,l.currentLooseValue=O(P,i,h),l.selectionStart=l.selectionEnd=l.currentLooseValue.length;break}case 110:{const N=v.current,P=h.numberSymbols();N&&(l.currentLooseValue=l.currentLooseValue.slice(0,l.selectionStart)+P.decimal+l.currentLooseValue.slice(l.selectionEnd),l.selectionStart=l.selectionEnd=l.selectionStart+1,l=_e(l,i,h));break}default:return}c.preventDefault(),D(c,l)},[i,g,V,$,x,Q,D,B]),ct=s.useCallback(()=>{ce.current=!0},[]),Ee=s.useCallback(c=>{if(C||L)return;const l=B();Ye(h.parseNumber(String(l.currentLooseValue),i),l,$,g,V,i,h),D(c,l)},[i,g,V,$,x,C,L,D,B]),Oe=s.useCallback(c=>{if(C||L)return;const l=B();Ge(h.parseNumber(String(l.currentLooseValue),i),l,$,g,V,i,h),D(c,l)},[i,g,V,$,x,C,L,D,B]),dt=s.useCallback(c=>{const l=qe(document);!document||l!==v.current||!v.current||C||L||(c.nativeEvent.deltaY<0&&Ee(c),c.nativeEvent.deltaY>0&&Oe(c))},[Ee,Oe,L,C]),mt=s.useCallback(c=>{k.current.currentLooseValue=ye.current,k.current.focused=!0,ke(T,c,z(),{}),G(l=>!l)},[T,G,z]),ft=s.useCallback(c=>{k.current=Te(),ke(Z,c,z(),{}),G(l=>!l)},[Z,G,z]),gt=s.useCallback(c=>{if(document&&v.current){const l=qe(document);c.preventDefault(),l!==v.current&&v.current.focus()}},[]);vt(()=>{v.current&&v.current.type!=="number"&&k.current.selectionStart!==void 0&&k.current.selectionEnd!==void 0&&(v.current.selectionStart=k.current.selectionStart,v.current.selectionEnd=k.current.selectionEnd,k.current.selectionStart=void 0,k.current.selectionEnd=void 0)},[ut]);const Pe=!xe()||fe().valid,je=s.createElement("span",{dir:w,style:q?ae:{width:u,...ae},className:Lt("k-input","k-numerictextbox",{[`k-input-${ze.sizeMap[H]||H}`]:H,[`k-input-${oe}`]:oe,[`k-rounded-${ze.roundedMap[Y]||Y}`]:Y,"k-invalid":!Pe,"k-required":b,"k-disabled":L},e),"aria-disabled":L?"true":void 0,...q?{}:we},s.createElement(at,null),s.createElement("input",{role:"spinbutton",value:ee===null?"":ee,tabIndex:Ct(m,L),accessKey:S,disabled:L,title:j,"aria-disabled":L?"true":void 0,"aria-valuemin":g,"aria-valuemax":V,"aria-label":le,"aria-labelledby":F,"aria-describedby":ne,"aria-required":b,placeholder:A,spellCheck:!1,autoComplete:"off",autoCorrect:"off",autoFocus:nt,type:ue||"tel",className:"k-input-inner",id:Fe,name:W,readOnly:C,style:Se,onChange:st,onFocus:mt,onBlur:ft,onKeyDown:it,onPaste:ct,onWheel:dt,ref:v}),s.createElement(ot,null),he,_&&s.createElement("span",{className:"k-input-spinner k-spin-button",onMouseDown:gt},s.createElement(Ke,{tabIndex:-1,type:"button",icon:"caret-alt-up",svgIcon:ht,rounded:null,fillMode:oe,className:"k-spinner-increase","aria-label":se.toLanguageString(ge,pe[ge]),title:se.toLanguageString(ge,pe[ge]),onClick:Ee}),s.createElement(Ke,{tabIndex:-1,type:"button",icon:"caret-alt-down",svgIcon:St,rounded:null,fillMode:oe,className:"k-spinner-decrease","aria-label":se.toLanguageString(be,pe[be]),title:se.toLanguageString(be,pe[be]),onClick:Oe})));return q?s.createElement(Nt,{label:q,editorId:Fe,editorValue:ee===null?"":ee,editorValid:Pe,editorDisabled:L,editorPlaceholder:A,children:je,style:{width:u},dir:w,...we}):je});rt.propTypes={value:o.number,defaultValue:o.number,step:o.number,format:o.oneOfType([o.string,o.shape({style:o.oneOf(["decimal","currency","percent","scientific","accounting"]),currency:o.string,currencyDisplay:o.oneOf(["symbol","code","name"]),useGrouping:o.bool,minimumIntegerDigits:o.number,minimumFractionDigits:o.number,maximumFractionDigits:o.number})]),width:o.oneOfType([o.string,o.number]),tabIndex:o.number,accessKey:o.string,title:o.string,placeholder:o.string,min:o.number,max:o.number,spinners:o.bool,disabled:o.bool,readOnly:o.bool,dir:o.string,name:o.string,label:o.string,validationMessage:o.string,required:o.bool,id:o.string,rangeOnEnter:o.bool,ariaLabelledBy:o.string,ariaDescribedBy:o.string,ariaLabel:o.string,onChange:o.func,onFocus:o.func,onBlur:o.func,size:o.oneOf([null,"small","medium","large"]),rounded:o.oneOf([null,"small","medium","large","full"]),fillMode:o.oneOf([null,"solid","flat","outline"])};const E={prefix:t=>null,suffix:t=>null,step:1,spinners:!0,disabled:!1,required:!1,validityStyles:!0,rangeOnEnter:!0,autoFocus:!1,onChange:t=>{},onFocus:t=>{},onBlur:t=>{},size:"medium",rounded:"medium",fillMode:"solid"};rt.displayName="KendoNumericTextBox";export{rt as E,It as e};
