import{G as v,M as L,F as N,l as M,r as m,E,s as l}from"./index.a4LlUfBk.js";import{s as y}from"./main.CbY58xgf.js";import{r as d}from"./index.B76fyJ3R.js";import{x as R,o as B,a as K}from"./withPropsContext.DQhlWJ5O.js";import{n as g}from"./index.OCJtFknY.js";import{s as O}from"./intlUtils.DJF7Jbha.js";import{e as q}from"./package-metadata.DKnpXxpX.js";import{L as w,I as F}from"./index.D0pMWoZI.js";/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright © 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */const p=(s,i=y)=>s.querySelectorAll(i.join(",")),x=(s,i=y)=>{if(s){const e=p(s,i);if(e.length&&e[0].focus)return e[0]}},V=(s,i=y)=>{if(s){const e=p(s,i);if(e.length&&e[e.length-1].focus)return e[e.length-1]}},Z=(s,i)=>{if(s){const e=x(s,i);e&&e.focus()}},ee=(s,i,e)=>{if(!(!i||s.keyCode!==v.tab)&&i){const t=x(i,e),a=V(i,e);t&&a&&!s.shiftKey&&s.target===a&&(s.preventDefault(),t.focus()),t&&a&&s.shiftKey&&s.target===t&&(s.preventDefault(),a.focus()),t||s.preventDefault()}},te=(s,i)=>{const e=p(s,i);e&&e.forEach(t=>{t.tabIndex=0})},ie=(s,i)=>{const e=p(s,i);e&&e.forEach(t=>{t.tabIndex=-1})};/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright © 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */const c=class b extends d.Component{constructor(i){super(i),this.setValidity=()=>{this._input&&this._input.setCustomValidity&&this._input.setCustomValidity(this.validity.valid?"":this.props.validationMessage||this.defaultValidationMessage.toLanguageString(w,F[w]))},this.limit=(e,t,a)=>{const n=a.offsetWidth,r=t.offsetWidth;return e<0?0:e>n-r?n-r:e},this.toggle=(e,t)=>{this.setState({checked:e}),this.valueDuringOnChange=e,N(this.props.onChange,t,this,{value:e}),this.valueDuringOnChange=void 0},this._element=null,this._wrapper=null,this._input=null,this._id=this.props.id,this.defaultValidationMessage=O(this),this.focus=()=>{this.actionElement&&this.actionElement.focus()},this.dummyInput=e=>d.createElement("input",{type:"checkbox",checked:this.props.checked,ref:t=>{this._input=t},tabIndex:-1,"aria-hidden":!0,value:e,style:{opacity:0,width:1,border:0,zIndex:-1,position:"absolute",left:"50%"},onChange:g,name:this.name||void 0}),this.handleClick=e=>{this.eventTimeStamp!==e.timeStamp&&(this.eventTimeStamp=e.timeStamp,this.toggle(!this.value,e))},this.handleKeyDown=e=>{if(this.props.disabled)return;const{keyCode:t}=e;(t===v.space||t===v.enter)&&(this.toggle(!this.value,e),e.preventDefault())},this.handleWrapperFocus=e=>{if(this.props.disabled)return;this.setState({focused:!0});const{onFocus:t}=this.props;t&&t.call(void 0,e)},this.handleWrapperBlur=e=>{if(this.props.disabled)return;this.setState({focused:!1});const{onBlur:t}=this.props;t&&t.call(void 0,e)},M(q),this.state={checked:i.defaultChecked||b.defaultProps.defaultChecked,focused:!1}}get value(){return this.valueDuringOnChange!==void 0?this.valueDuringOnChange:this.props.checked!==void 0?this.props.checked:this.state.checked}get element(){return this._element}get actionElement(){return this._wrapper}get name(){return this.props.name}get validity(){const i=this.props.validationMessage!==void 0,e=this.props.valid!==void 0?this.props.valid:this.props.required?!!this.value:!0,t=this.props.valid!==void 0?this.props.valid:e;return{customError:i,valid:t,valueMissing:this.value===null}}get validityStyles(){return this.props.validityStyles!==void 0?this.props.validityStyles:b.defaultProps.validityStyles}get required(){return this.props.required!==void 0?this.props.required:!1}componentDidMount(){this.setValidity(),this.forceUpdate()}componentDidUpdate(){this.setValidity()}render(){const{focused:i}=this.state,{dir:e,disabled:t,trackRounded:a,thumbRounded:n,size:r,offLabel:k,onLabel:S,tabIndex:$}=this.props;this.dir=e||this.element&&getComputedStyle(this.element).direction||void 0;const D=!this.validityStyles||this.validity.valid,I=m("k-switch",{[`k-switch-${E.sizeMap[r]||r}`]:r,"k-switch-on":this.value,"k-switch-off":!this.value,"k-focus":i,"k-disabled":t,"k-invalid":!D},this.props.className),_={"aria-checked":this.value,"aria-disabled":t||void 0,"aria-labelledby":this.props.ariaLabelledBy,"aria-describedby":this.props.ariaDescribedBy,"aria-label":this.props.ariaLabel,"aria-required":this.props.required};return d.createElement("span",{ref:f=>{this._wrapper=f},role:"switch",..._,className:I,dir:this.dir,onKeyDown:this.handleKeyDown,onClick:this.handleClick,onBlur:this.handleWrapperBlur,onFocus:this.handleWrapperFocus,tabIndex:B($,t,void 0),accessKey:this.props.accessKey,id:this.props.id||this._id},d.createElement("span",{className:m("k-switch-track",{[`k-rounded-${E.roundedMap[a]||a}`]:a}),ref:f=>{this._element=f}},this.dummyInput(this.value),S?d.createElement("span",{className:"k-switch-label-on"},S):"",k?d.createElement("span",{className:"k-switch-label-off"},k):""),d.createElement("span",{className:"k-switch-thumb-wrap"},d.createElement("span",{className:m("k-switch-thumb",{[`k-rounded-${n}`]:n})})))}};c.displayName="Switch",c.propTypes={accessKey:l.string,checked:l.bool,className:l.string,disabled:l.bool,defaultChecked:l.bool,size:l.oneOf([null,"small","medium","large"]),trackRounded:l.oneOf([null,"small","medium","large","full"]),thumbRounded:l.oneOf([null,"small","medium","large","full"]),dir:l.string,id:l.string,ariaLabelledBy:l.string,ariaDescribedBy:l.string,offLabel:l.string,required:l.bool,tabIndex:l.number,valid:l.bool,validate:l.bool,validationMessage:l.string,onBlur:l.any,onChange:l.any,onFocus:l.any,onLabel:l.string},c.defaultProps={disabled:!1,defaultChecked:!1,size:"medium",trackRounded:"full",thumbRounded:"full",offLabel:"OFF",onBlur:g,onFocus:g,onLabel:"ON",validityStyles:!0};let W=c;const z=K(),T=L(R(z,W));T.displayName="KendoReactSwitch";let o=[],u=0;const h=4;let P=s=>{let i=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=i.push(t),()=>{for(let n=u+h;n<o.length;)o[n]===t?o.splice(n,h):n+=h;let a=i.indexOf(t);~a&&(i.splice(a,1),--e.lc||e.off())}},notify(t,a){let n=!o.length;for(let r of i)o.push(r,e.value,t,a);if(n){for(u=0;u<o.length;u+=h)o[u](o[u+1],o[u+2],o[u+3]);o.length=0}},off(){},set(t){let a=e.value;a!==t&&(e.value=t,e.notify(a))},subscribe(t){let a=e.listen(t);return t(e.value),a},value:s};return e};function U(s,i,e){let t=new Set([...i,void 0]);return s.listen((a,n,r)=>{t.has(r)&&e(a,n,r)})}const se=P(!1);let C=(s,i)=>e=>{s.current=e,i()};function ae(s,{keys:i,deps:e=[s,i]}={}){let t=d.useRef();t.current=s.get();let a=d.useCallback(r=>i?.length>0?U(s,i,C(t,r)):s.listen(C(t,r)),e),n=()=>t.current;return d.useSyncExternalStore(a,n,n)}export{T as I,Z as e,te as g,se as i,ee as n,ae as u,ie as y};
